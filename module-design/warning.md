# 报警功能模块

报警功能模块中主要主要包含了实时报警、历史报警、报警配置三个组件

### 1. 实时报警组件
实时报警组件中，如果用户之前点击了忽略，则会在localstorage中保存一个对应点的开始忽略时间和时长数据结构是一个对象，但是存在localstorage中的时候使用`JSON.stringify()`方法转成字符串，然后项目开始后调用`/warning/getRealtime`这个接口内的数据。得到的数据和localstorage中对应的点对比，查看`开始忽略时间+忽略时长 是否大于当前时间`，如果不大于则将忽略的报警恢复。

### 2. 历史报警组件
历史报警根据`/warning/getHistory`这个借口获取到历史的报警数据，用户根据点名或者根据时间搜索时也是调用这个接口获取数据。导出成execl时是根据`/warning/downloadHistoryFile`这个接口，并且加上开始时间和结束时间为条件导出execl表格.

### 3. 报警配置组件
报警配置组件中会先展示所有的已经添加到报警的点位。使用`/warningConfig/add`接口选择新建报警点位，选择报警点位。进入创建报警之后可以选择需要添加的报警点位。选择报警点位是一个单独的组件`PointView`。配置报警的规则如下：如果选择布尔报警，那么当这个点的点值为1时，就会添加到实时报警中，如果选择创建高低限报警的时候需要设置高限和低限值，当这个点值超过这个范围后也会报警。也可以选择删除和修改，分别使用了`/warningConfig/remove`和`/warningConfig/edit`接口